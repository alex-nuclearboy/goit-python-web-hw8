# NoSQL Databases, Redis Caching, and RabbitMQ Messaging

This educational project demonstrates the integration of NoSQL databases (MongoDB), caching with Redis, and message brokering using RabbitMQ within a Python-based application. It emphasises efficient data handling, caching strategies, and asynchronous message processing to showcase a scalable and responsive system design.

## Key Features

#### Task 1: MongoDB and Redis

- **Cloud Database Integration:** Uses cloud-based MongoDB Atlas for scalable and reliable data storage, managing authors and their quotes.
- **Dynamic Quote Retrieval:** Features a script to fetch quotes based on tags, author names, or a combination of tags, enhancing data accessibility.
- **Efficient Redis Caching:** Implements Redis for efficient caching of search results, significantly reducing query times for repeated searches by serving data directly from the cache.
- **Advanced Query Shortcuts:** Introduces shortcuts for common queries, facilitating quick and intuitive search through abbreviated terms.

#### Task 2: RabbitMQ

- **Custom Contact Model:** Includes fields such as full name, email, phone number, birth date, address (generated by `Faker`), preferred method of message delivery (SMS or email), message status (default False, True after sending), and timestamp for message creation and queuing.
- **Cloud Database Integration:** MongoDB Atlas is used for cloud-based storage of contact information.
- **Message Queuing:** Uses RabbitMQ to demonstrate effective message queuing for a decoupled architecture, improving task organisation and processing.
- **Message Sending Simulation:** The `producer.py` script generates and queues fake contact data, while the `consumer_email.py` and `consumer_sms.py` scripts simulate sending messages via email and SMS, respectively, updating the message status in the database.


## Installation and Usage

- Clone the repository and navigate to its directory:

```bash
git clone https://github.com/alex-nuclearboy/goit-python-web-hw8.git
cd goit-python-web-hw8
```

- Activate the Poetry environment:

```bash
poetry shell
```

#### Demonstrating MongoDB and Redis:

- Navigate to the Task 1 directory:
```bash
cd task_1
```

- Start Redis Container:
    - Unix/Linux/macOS:
    ```bash
    ./start-redis.sh
    ```
    - Windows:
    ```powershell
    .\start-redis.bat
    ```

- Populate Database:
    - Unix/Linux/macOS:
    ```bash
    python3 seeds.py
    ```
    - Windows:
    ```powershell
    py seeds.py
    ```

- Execute queries with:
    - Unix/Linux/macOS:
    ```bash
    python3 queries.py
    ```
    - Windows:
    ```powershell
    py queries.py
    ```

The script runs indefinitely, accepting input commands for a flexible search experience. Accepts commands in the following format `command:value`.

Examples: 
`name: Steve Martin` — Retrieves and displays all quotes by Steve Martin.
`tag:life` — Finds and returns a list of quotes associated with the tag 'life'.
`tags:life,live` — Searches for and displays quotes tagged with 'life' or 'live' (Note: No spaces between tags).

For a more streamlined search experience, the project supports abbreviated search queries, such as:
`name:st` for quotes by authors whose names start with "St" like "Steve Martin".
`tag:li` for quotes tagged with words starting with "li" like "life".

- To exit the script and end the search session, simply enter the command `exit`.

After exploring the project's functionalities, it is possible to stop and remove the Docker container used for Redis caching to clean up the local environment. Execute the following commands in the terminal:
```bash
docker stop redis-cache
docker rm redis-cache
```

#### RabbitMQ Email and SMS Simulation:

- Navigate to the Task 2 directory:
```bash
cd ../task_2
```

- Start RabbitMQ Container:
    - Unix/Linux/macOS:
    ```bash
    ./start-rabbitmq.sh
    ```
    - Windows:
    ```powershell
    .\start-rabbitmq.bat
    ```

- Generate fake contacts and record them in the database:
    - Unix/Linux/macOS:
    ```bash
    python3 producer.py
    ```
    - Windows:
    ```powershell
    py producer.py
    ```

- Process Email messages:
    - Unix/Linux/macOS:
    ```bash
    python3 consumer_email.py
    ```
    - Windows:
    ```powershell
    py consumer_email.py
    ```

To stop the consumer script, press `CTRL+C`.

- Process SMS messages:
    - Unix/Linux/macOS:
    ```bash
    python3 consumer_sms.py
    ```
    - Windows:
    ```powershell
    py consumer_sms.py
    ```

To stop the consumer script, press `CTRL+C`.

- Stop and remove the RabbitMQ container:

```bash
docker stop rabbitmq
docker rm rabbitmq
```
